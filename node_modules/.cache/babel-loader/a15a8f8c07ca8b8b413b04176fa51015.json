{"ast":null,"code":"var _jsxFileName = \"/Users/joserodriguez/Desktop/food-chase1/src/App.js\";\nimport React from 'react';\nimport Navegation from './components/Navegation/Navegation';\nimport PostCardList from './components/PostCardList/PostCardList';\nimport Signin from './components/Signin/Signin';\nimport Register from './components/Register/Register';\nimport CreateMeal from './components/CreateMeal/CreateMeal';\nimport NoPosts from './components/NoPosts/NoPosts';\nimport './App.css';\n\nclass App extends React.Component {\n  constructor() {\n    super();\n\n    this.loadUser = user => {\n      this.setState({\n        user: {\n          name: user.name,\n          lastname: user.lastname,\n          email: user.email\n        }\n      });\n      console.log(this.state.user.email);\n    };\n\n    this.updateMealPost = () => {\n      fetch('http://localhost:3000/meals').then(response => response.json()).then(data => this.setState({\n        cards: data\n      })); // this.isSignInChange()\n      // console.log(this.state.isSignIn)\n    };\n\n    this.updateReservedPost = () => {\n      fetch('http://localhost:3000/reserved', {\n        method: 'put',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: this.state.user.email\n        })\n      }).then(response => response.json()).then(data => this.setState({\n        reserved: data\n      }));\n    };\n\n    this.updateByMePost = () => {\n      fetch('http://localhost:3000/myposts', {\n        method: 'put',\n        headers: {\n          'Content-type': 'application/json'\n        },\n        body: JSON.stringify({\n          email: this.state.user.email\n        })\n      }).then(response => response.json()).then(data => this.setState({\n        byme: data\n      }));\n    };\n\n    this.isSignInChange = () => {\n      this.state.isSignIn === false ? this.setState({\n        isSignIn: true\n      }) // console.log(this.state.isSignIn)\n      : this.setState({\n        isSignIn: false\n      }); // console.log(this.state.isSignIn)\n    };\n\n    this.onRouteChange = route => {\n      if (route === 'mealposts') {\n        this.updateMealPost(); // this.updateMealPost()\n        // this.updateReservedPost()\n      } else if (route === 'reserved') {\n        this.updateReservedPost();\n      } else if (route === 'postedbyme') {\n        this.updateByMePost();\n      } else {\n        this.updateMealPost();\n      }\n\n      this.setState({\n        route: route\n      });\n    };\n\n    this.reservePlate = index => {\n      if (this.state.route === 'mealposts') {\n        let plateToSend = {\n          id: this.state.cards[index].id,\n          platename: this.state.cards[index].platename,\n          description: this.state.cards[index].description,\n          email: this.state.user.email,\n          image: this.state.cards[index].image,\n          price: this.state.cards[index].price\n        };\n        fetch('http://localhost:3000/reserve', {\n          method: 'post',\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify(plateToSend)\n        }).then(response => {\n          this.updateReservedPost();\n          this.updateMealPost();\n          this.onRouteChange('mealposts');\n        });\n      } else if (this.state.route === 'reserved') {\n        fetch('http://localhost:3000/complete', {\n          method: 'put',\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: this.state.reserved[index].id\n          })\n        }).then(response => {\n          this.updateReservedPost();\n        });\n      } else if (this.state.route === 'postedbyme') {\n        fetch('http://localhost:3000/remove', {\n          method: 'put',\n          headers: {\n            'Content-type': 'application/json'\n          },\n          body: JSON.stringify({\n            id: this.state.byme[index].id\n          })\n        }).then(response => {\n          this.updateByMePost();\n        });\n      } // this.state.reserved.push(this.state.cards[index])\n      // this.state.cards.splice(index,1)\n\n    };\n\n    this.state = {\n      isSignIn: false,\n      route: 'signin',\n      cards: [],\n      reserved: [],\n      byme: [],\n      user: {\n        name: '',\n        lastname: '',\n        email: ''\n      }\n    };\n  } // componentDidMount(){\n  //   this.updateReservedPost()\n  //   console.log(this.state.reserved)\n  // }\n\n\n  render() {\n    console.log(this.state.cards.length, this.state.route);\n    const route = this.state.route;\n\n    if (route === 'signin') {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, React.createElement(Navegation, {\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        isSignedIn: this.state.isSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167\n        },\n        __self: this\n      }), React.createElement(Signin, {\n        loadUser: this.loadUser,\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }));\n    } else if (route === 'register') {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Navegation, {\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        isSignedIn: this.state.isSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }), React.createElement(Register, {\n        loadUser: this.loadUser,\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }));\n    } else if (route === 'mealposts') {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180\n        },\n        __self: this\n      }, React.createElement(Navegation, {\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        isSignedIn: this.state.isSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), React.createElement(PostCardList, {\n        route: this.state.route,\n        reservePlate: this.reservePlate,\n        cards: this.state.cards,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }));\n    } else if (route === 'postedbyme') {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, React.createElement(Navegation, {\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        isSignedIn: this.state.isSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 188\n        },\n        __self: this\n      }), React.createElement(PostCardList, {\n        reservePlate: this.reservePlate,\n        cards: this.state.byme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189\n        },\n        __self: this\n      }));\n    } else if (route === 'reserved') {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194\n        },\n        __self: this\n      }, React.createElement(Navegation, {\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        isSignedIn: this.state.isSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }), React.createElement(PostCardList, {\n        route: this.state.route,\n        reservePlate: this.reservePlate,\n        cards: this.state.reserved,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }));\n    } else if (route === 'postameal') {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }, React.createElement(Navegation, {\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        isSignedIn: this.state.isSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }), React.createElement(CreateMeal, {\n        updateMealPost: this.updateMealPost,\n        userEmail: this.state.user.email,\n        onRouteChange: this.onRouteChange,\n        cards: this.state.cards,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203\n        },\n        __self: this\n      }));\n    } else {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }, React.createElement(Navegation, {\n        isSignInChange: this.isSignInChange,\n        onRouteChange: this.onRouteChange,\n        isSignedIn: this.state.isSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 209\n        },\n        __self: this\n      }));\n    }\n  }\n\n}\n\nexport default App; // <PostCardList cards = {this.state.cards} />","map":{"version":3,"sources":["/Users/joserodriguez/Desktop/food-chase1/src/App.js"],"names":["React","Navegation","PostCardList","Signin","Register","CreateMeal","NoPosts","App","Component","constructor","loadUser","user","setState","name","lastname","email","console","log","state","updateMealPost","fetch","then","response","json","data","cards","updateReservedPost","method","headers","body","JSON","stringify","reserved","updateByMePost","byme","isSignInChange","isSignIn","onRouteChange","route","reservePlate","index","plateToSend","id","platename","description","image","price","render","length"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Navegation from './components/Navegation/Navegation';\nimport PostCardList from './components/PostCardList/PostCardList';\nimport Signin from './components/Signin/Signin';\nimport Register from './components/Register/Register';\nimport CreateMeal from './components/CreateMeal/CreateMeal';\nimport NoPosts from './components/NoPosts/NoPosts';\nimport './App.css';\n\nclass App extends React.Component{\n  constructor(){\n    super()\n    this.state = {\n      isSignIn: false,\n      route: 'signin',\n      cards : [],\n      reserved : [],\n      byme:[],\n      user: {\n        name:'',\n        lastname: '',\n        email: ''\n      }\n    }\n  }\n\n  // componentDidMount(){\n  //   this.updateReservedPost()\n  //   console.log(this.state.reserved)\n  // }\n\n  loadUser = (user) => {\n    this.setState({user: {\n      name: user.name,\n      lastname: user.lastname,\n      email: user.email\n    }})\n    console.log(this.state.user.email)\n\n  }\n\n  updateMealPost = () => {\n    fetch('http://localhost:3000/meals')\n    .then(response => response.json())\n    .then(data => this.setState({cards: data}))\n    // this.isSignInChange()\n    // console.log(this.state.isSignIn)\n  }\n\n  updateReservedPost = () => {\n    fetch('http://localhost:3000/reserved', {\n      method:'put',\n      headers: {'Content-type': 'application/json'},\n      body: JSON.stringify({\n        email:this.state.user.email\n      })\n    })\n    .then(response => response.json())\n    .then(data => this.setState({reserved:data}))\n\n  }\n\n  updateByMePost = () => {\n\n    fetch('http://localhost:3000/myposts', {\n      method:'put',\n      headers: {'Content-type': 'application/json'},\n      body: JSON.stringify({\n        email:this.state.user.email\n      })\n    })\n    .then(response => response.json())\n    .then(data => this.setState({byme:data}))\n  }\n\n\n\n  isSignInChange = () => {\n    this.state.isSignIn === false \n    ?\n    this.setState({isSignIn: true})\n    // console.log(this.state.isSignIn)\n    :\n    this.setState({isSignIn:false})\n    // console.log(this.state.isSignIn)\n  }\n\n  onRouteChange = (route) =>{\n    if (route === 'mealposts'){\n      this.updateMealPost()\n      // this.updateMealPost()\n      // this.updateReservedPost()\n    }else if(route === 'reserved'){\n      this.updateReservedPost()\n    } else if(route === 'postedbyme'){\n      this.updateByMePost()\n    } else {\n      this.updateMealPost()\n    }\n\n    this.setState({route:route})\n\n  }\n\n  reservePlate = (index) => {\n    \n    if(this.state.route === 'mealposts'){\n        let plateToSend = {\n        id:this.state.cards[index].id,\n        platename: this.state.cards[index].platename,\n        description: this.state.cards[index].description,\n        email: this.state.user.email,\n        image:this.state.cards[index].image,\n        price: this.state.cards[index].price\n      }\n\n      fetch('http://localhost:3000/reserve', {\n        method:'post',\n        headers: {'Content-type': 'application/json'},\n        body: JSON.stringify(plateToSend)\n        })\n        .then(response => {\n          this.updateReservedPost()\n          this.updateMealPost()\n          this.onRouteChange('mealposts')\n        })\n    }else if(this.state.route === 'reserved'){\n      fetch('http://localhost:3000/complete', {\n        method:'put',\n        headers: {'Content-type': 'application/json'},\n        body: JSON.stringify({\n          id:this.state.reserved[index].id })\n        })\n        .then(response => {\n          this.updateReservedPost()\n\n        })\n    }\n\n    else if(this.state.route === 'postedbyme'){\n      fetch('http://localhost:3000/remove', {\n        method:'put',\n        headers: {'Content-type': 'application/json'},\n        body: JSON.stringify({\n          id:this.state.byme[index].id})\n        })\n        .then(response => {\n          this.updateByMePost()\n\n        })\n   \n\n  }\n    \n\n    // this.state.reserved.push(this.state.cards[index])\n    // this.state.cards.splice(index,1)\n  }\n  \n\n  render() {\n    console.log(this.state.cards.length, this.state.route)\n    const {route} = this.state;\n    if(route === 'signin'){\n      return(\n        <div>\n          <Navegation isSignInChange = {this.isSignInChange} onRouteChange ={this.onRouteChange} isSignedIn = {this.state.isSignIn}/>\n          <Signin loadUser = {this.loadUser} isSignInChange= {this.isSignInChange} onRouteChange = {this.onRouteChange}/>\n        </div>\n      )\n    }else if (route === 'register'){\n      return(\n        <div>\n          <Navegation isSignInChange = {this.isSignInChange} onRouteChange ={this.onRouteChange} isSignedIn = {this.state.isSignIn}/>\n          <Register loadUser = {this.loadUser} isSignInChange = {this.isSignInChange} onRouteChange = {this.onRouteChange}/>\n        </div>\n      )\n    }else if(route === 'mealposts'){\n      return(\n        <div>\n          <Navegation isSignInChange = {this.isSignInChange} onRouteChange ={this.onRouteChange} isSignedIn = {this.state.isSignIn}/>\n          <PostCardList route = {this.state.route} reservePlate = {this.reservePlate} cards={this.state.cards}/>\n        </div>\n      )\n    }else if(route === 'postedbyme'){\n      return(\n        <div>\n          <Navegation isSignInChange = {this.isSignInChange} onRouteChange ={this.onRouteChange} isSignedIn = {this.state.isSignIn}/>\n          <PostCardList reservePlate = {this.reservePlate} cards={this.state.byme}/>\n        </div>\n      )\n    }else if(route === 'reserved'){\n      return(\n        <div>\n          <Navegation isSignInChange = {this.isSignInChange} onRouteChange ={this.onRouteChange} isSignedIn = {this.state.isSignIn}/>\n          <PostCardList route = {this.state.route} reservePlate = {this.reservePlate} cards={this.state.reserved}/>\n        </div>\n      )\n    }else if(route === 'postameal'){\n      return(\n        <div>\n          <Navegation isSignInChange = {this.isSignInChange} onRouteChange ={this.onRouteChange} isSignedIn = {this.state.isSignIn}/>\n          <CreateMeal updateMealPost ={this.updateMealPost} userEmail = {this.state.user.email} onRouteChange={this.onRouteChange} cards={this.state.cards}/>\n        </div>\n      )\n    }else{\n      return(\n        <div>\n          <Navegation isSignInChange = {this.isSignInChange} onRouteChange ={this.onRouteChange} isSignedIn = {this.state.isSignIn}/>\n        </div>\n      )\n    }\n  }  \n}\n\nexport default App;\n// <PostCardList cards = {this.state.cards} />\n"]},"metadata":{},"sourceType":"module"}